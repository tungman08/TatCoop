function uploadImage(a,e,s){var t=a.get(0).files[0],i=$("#button-photo"),n=$("#button-document"),d=$("#result-photo"),o=$("#preview-photo"),l=new FormData;l.append("photo",t),l.append("id",s),l.append("type",e),t.size<20971520?$.ajax({dataType:"json",url:"/ajax/uploadphoto",type:"post",cache:!1,data:l,processData:!1,contentType:!1,error:function(a,e,s){d.html('<span class="text-danger"><i class="fa fa-times-circle fa-fw"></i> เกิดข้อผิดพลาดในการอัฟโหลด</span>'),d.show().delay(3e3).fadeOut(),i.removeClass("disabled"),n.removeClass("disabled")},beforeSend:function(){i.addClass("disabled"),n.addClass("disabled");var a='<div id="photo-new" class="col-lg-4 col-md-6 padding-sm">';a+='<div class="thumbnail margin-b-sm text-center" style="height: 100px; padding-top: 40px;">',a+='<span id="progress">Uploading...</span>',a+="</div>",a+="</div>",o.append(a)},success:function(a){d.html('<span class="text-success"><i class="fa fa-check-circle fa-fw"></i> เพิ่มรูปประกอบเรียบร้อย</span>'),d.show().delay(3e3).fadeOut(),$("#photo-new").remove(),i.removeClass("disabled"),n.removeClass("disabled");var e='<div id="photo-'+a.id+'" class="col-lg-4 col-md-6 padding-sm">';e+='<div class="thumbnail margin-b-sm text-center">',e+='<img src="'+a.file+'" class="img-responsive" style="max-height: 130px;" alt="" />',e+='<hr class="margin-xs" />',e+='<button type="button" class="btn btn-danger btn-flat btn-xs"',e+="onclick=\"javascript:var result = confirm('คุณต้องการลบรูปนี้ใช่หรือไม่ ?'); if (result) { deleteImage('"+attach_type+"', "+a.id+'); }">',e+='<i class="fa fa-close"></i> ลบ',e+="</button>",e+="</div>",e+="</div>",o.append(e)}}):(d.html('<span class="text-danger"><i class="fa fa-times-circle fa-fw"></i> รูปภาพต้องมีขนาดไม่เกิน 20 MB</span>'),d.show().delay(3e3).fadeOut())}function uploadDocument(a,e,s){var t=a.get(0).files[0],i=$("#button-photo"),n=$("#button-document"),d=$("#result-document"),o=$("#preview-document"),l=new FormData;l.append("document",t),l.append("id",s),l.append("type",e),t.size<20971520?$.ajax({dataType:"json",url:"/ajax/uploaddocument",type:"post",cache:!1,data:l,processData:!1,contentType:!1,error:function(a,e,s){d.html('<span class="text-danger"><i class="fa fa-times-circle fa-fw"></i> เกิดข้อผิดพลาดในการอัฟโหลด</span>'),d.show().delay(3e3).fadeOut(),i.removeClass("disabled"),n.removeClass("disabled")},beforeSend:function(){i.addClass("disabled"),n.addClass("disabled");var a='<li id="document-new" class="item list-item" style="cursor: default;">';a+='<div class="input-group">',a+='<div id="caption-new" class="file-caption-name">',a+='<i class="fa fa-hourglass fa-fw"></i> 0%',a+="</div>",a+="</div>",a+="</li>",o.append(a)},xhr:function(){var a=$.ajaxSettings.xhr();return a.upload.onprogress=function(a){$("#caption-new").html('<i class="fa fa-hourglass fa-fw"></i> '+Math.ceil(a.loaded/a.total*100)+"%")},a},success:function(a){d.html('<span class="text-success"><i class="fa fa-check-circle fa-fw"></i> เพิ่มเอกสารประกอบเรียบร้อย</span>'),d.show().delay(3e3).fadeOut(),$("#document-new").remove(),i.removeClass("disabled"),n.removeClass("disabled");var e='<li id="document-'+a.id+'" class="item list-item" style="cursor: default;">';e+='<div class="input-group">',e+='<div id="caption-'+a.id+'" class="file-caption-name">',e+='<i class="fa fa-file-pdf-o fa-fw"></i> '+a.display,e+="</div>",e+='<div class="input-group-btn">',e+='<button type="button" class="btn btn-danger btn-flat btn-xs" ',e+="onclick=\"javascript:var result = confirm('คุณต้องการลบเอกสารนี้ใช่หรือไม่ ?'); if (result) { deleteDocument('"+attach_type+"', "+a.id+'); }">',e+='<i class="fa fa-close"></i> ลบ</button>',e+="</div>",e+="</div>",e+="</li>",o.append(e)}}):(d.html('<span class="text-danger"><i class="fa fa-times-circle fa-fw"></i> เอกสารต้องมีขนาดไม่เกิน 20 MB</span>'),d.show().delay(3e3).fadeOut())}function deleteImage(a,e){$.ajax({dataType:"json",url:"/ajax/deletephoto",type:"post",cache:!1,data:{id:e,type:a},error:function(a,e,s){},beforeSend:function(){var a='<div class="thumbnail margin-b-sm text-center" style="height: 100px; padding-top: 40px;">';a+='<span id="progress">Deleting...</span>',a+="</div>",$("#photo-"+e).html(a)},success:function(a){$("#photo-"+a).remove()}})}function deleteDocument(a,e){$.ajax({dataType:"json",url:"/ajax/deletedocument",type:"post",cache:!1,data:{id:e,type:a},error:function(a,e,s){},success:function(a){$("#document-"+a).remove()}})}