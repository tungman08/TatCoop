function uploadImage(e,a,s){var t=e.get(0).files[0],o=$("#button-photo"),n=$("#button-document"),l=$("#result-photo"),i=$("#preview-photo"),d=new FormData;d.append("photo",t),d.append("id",s),d.append("type",a),t.size<20971520?$.ajax({dataType:"json",url:"/ajax/uploadphoto",type:"post",cache:!1,data:d,processData:!1,contentType:!1,error:function(e,a,s){l.html('<span class="text-danger"><i class="fa fa-times-circle fa-fw"></i> เกิดข้อผิดพลาดในการอัฟโหลด</span>'),l.show().delay(3e3).fadeOut(),o.removeClass("disabled"),n.removeClass("disabled"),console.log(e.responseText),console.log(s)},beforeSend:function(){o.addClass("disabled"),n.addClass("disabled");var e='<div id="photo-new" class="col-lg-4 col-md-6 padding-sm">';e+='<div class="thumbnail margin-b-sm text-center" style="height: 100px; padding-top: 40px;">',e+='<span id="progress">Uploading...</span>',e+="</div>",e+="</div>",i.append(e)},success:function(e){l.html('<span class="text-success"><i class="fa fa-check-circle fa-fw"></i> เพิ่มรูปประกอบเรียบร้อย</span>'),l.show().delay(3e3).fadeOut(),$("#photo-new").remove(),o.removeClass("disabled"),n.removeClass("disabled");var a='<div id="photo-'+e.id+'" class="col-lg-4 col-md-6 padding-sm">';a+='<div class="thumbnail margin-b-sm text-center">',a+='<img src="'+e.file+'" class="img-responsive" style="max-height: 130px;" alt="" />',a+='<hr class="margin-xs" />',a+='<button type="button" class="btn btn-danger btn-flat btn-xs"',a+="onclick=\"javascript:var result = confirm('คุณต้องการลบรูปนี้ใช่หรือไม่ ?'); if (result) { deleteImage('"+attach_type+"', "+e.id+'); }">',a+='<i class="fa fa-close"></i> ลบ',a+="</button>",a+="</div>",a+="</div>",i.append(a)}}):(l.html('<span class="text-danger"><i class="fa fa-times-circle fa-fw"></i> รูปภาพต้องมีขนาดไม่เกิน 20 MB</span>'),l.show().delay(3e3).fadeOut())}function uploadDocument(e,a,s){var t=e.get(0).files[0],o=$("#button-photo"),n=$("#button-document"),l=$("#result-document"),i=$("#preview-document"),d=new FormData;d.append("document",t),d.append("id",s),d.append("type",a),t.size<20971520?$.ajax({dataType:"json",url:"/ajax/uploaddocument",type:"post",cache:!1,data:d,processData:!1,contentType:!1,error:function(e,a,s){l.html('<span class="text-danger"><i class="fa fa-times-circle fa-fw"></i> เกิดข้อผิดพลาดในการอัฟโหลด</span>'),l.show().delay(3e3).fadeOut(),o.removeClass("disabled"),n.removeClass("disabled"),console.log(e.responseText),console.log(s)},beforeSend:function(){o.addClass("disabled"),n.addClass("disabled");var e='<li id="document-new" class="item list-item" style="cursor: default;">';e+='<div class="input-group">',e+='<div id="caption-new" class="file-caption-name">',e+='<i class="fa fa-hourglass fa-fw"></i> 0%',e+="</div>",e+="</div>",e+="</li>",i.append(e)},xhr:function(){var e=$.ajaxSettings.xhr();return e.upload.onprogress=function(e){$("#caption-new").html('<i class="fa fa-hourglass fa-fw"></i> '+Math.ceil(e.loaded/e.total*100)+"%")},e},success:function(e){l.html('<span class="text-success"><i class="fa fa-check-circle fa-fw"></i> เพิ่มเอกสารประกอบเรียบร้อย</span>'),l.show().delay(3e3).fadeOut(),$("#document-new").remove(),o.removeClass("disabled"),n.removeClass("disabled");var a='<li id="document-'+e.id+'" class="item list-item" style="cursor: default;">';a+='<div class="input-group">',a+='<div id="caption-'+e.id+'" class="file-caption-name">',a+='<i class="fa fa-file-pdf-o fa-fw"></i> '+e.display,a+="</div>",a+='<div class="input-group-btn">',a+='<button type="button" class="btn btn-danger btn-flat btn-xs" ',a+="onclick=\"javascript:var result = confirm('คุณต้องการลบเอกสารนี้ใช่หรือไม่ ?'); if (result) { deleteDocument('"+attach_type+"', "+e.id+'); }">',a+='<i class="fa fa-close"></i> ลบ</button>',a+="</div>",a+="</div>",a+="</li>",i.append(a)}}):(l.html('<span class="text-danger"><i class="fa fa-times-circle fa-fw"></i> เอกสารต้องมีขนาดไม่เกิน 20 MB</span>'),l.show().delay(3e3).fadeOut())}function deleteImage(e,a){$.ajax({dataType:"json",url:"/ajax/deletephoto",type:"post",cache:!1,data:{id:a,type:e},error:function(e,a,s){console.log(e.responseText),console.log(s)},beforeSend:function(){var e='<div class="thumbnail margin-b-sm text-center" style="height: 100px; padding-top: 40px;">';e+='<span id="progress">Deleting...</span>',e+="</div>",$("#photo-"+a).html(e)},success:function(e){$("#photo-"+e).remove()}})}function deleteDocument(e,a){$.ajax({dataType:"json",url:"/ajax/deletedocument",type:"post",cache:!1,data:{id:a,type:e},error:function(e,a,s){console.log(e.responseText),console.log(s)},success:function(e){$("#document-"+e).remove()}})}